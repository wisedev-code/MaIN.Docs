# üìÇ Agent with Redirect Image Example

This example demonstrates how to combine the power of agents with image generation. One agent analyzes a PDF and generates a concise image description, which is then passed to another agent to generate an image based on that description. This creates an interactive workflow between agents that incorporates both text and image output.

## üöÄ Quick Start

In this example, the first agent processes a PDF and generates a short image description. The second agent then takes that description and generates an image based on it.

### üìù Code Example

```csharp
public class AgentWithRedirectImageExample : IExample
{
    public async Task Start()
    {
        Console.WriteLine("Basic agent&friends with images example is running!");

        var systemPrompt =
            """
            You analyze a stored PDF and generate an image prompt. Your output must be a single prompt with a maximum of 10 words.
            Do not include any explanations, context, or extra text‚Äîonly the prompt itself.
            Avoid mentioning specific characters or names; focus on the topic and context.
            """;
        
        var systemPromptSecond =
            """
            Generate image based on given prompt
            """;

        var contextSecond = AIHub.Agent()
            .WithModel("FLUX.1_Shnell")
            .WithInitialPrompt(systemPromptSecond)
            .Create();
        
        var context = AIHub.Agent()
            .WithModel("llama3.2:3b")
            .WithInitialPrompt(systemPrompt)
            .WithSteps(StepBuilder.Instance
                .Answer()
                .Redirect(agentId: contextSecond.GetAgentId())
                .Build())
            .Create(interactiveResponse: true);
        
        var result = await context
            .ProcessAsync(new Message()
            {
                Content = "Prepare short image description about Nicolaus Copernicus. Dont mention name, try to focus on topic and context",
                Role = "User",
                Files = [new FileInfo()
                {
                    Name = "Nicolaus_Copernicus",
                    Extension = "pdf",
                    Path = "./Files/Nicolaus_Copernicus.pdf"
                }]
            });
        
        ImagePreviewer.ShowImage(result.Message.Images);
    }
}
```

## üîπ How It Works
1. **Create system prompts**:
   - The first agent‚Äôs system prompt instructs it to analyze a stored PDF and generate a brief image description (up to 10 words).
   - The second agent‚Äôs system prompt instructs it to generate an image based on the given prompt.

2. **Initialize agents**:
   - **First agent**: The first agent (`llama3.2:3b`) processes the PDF and generates the image prompt based on the content.
   - **Second agent**: The second agent (`FLUX.1_Shnell`) takes the generated prompt and uses it to create an image.

3. **Set up conversation flow**:
   - The first agent uses `.Redirect(agentId: contextSecond.GetAgentId())` to pass control to the second agent, which generates the image.

4. **Send PDF to agents**:
   - The `ProcessAsync()` method is used to send a user query, along with a PDF file (`Nicolaus_Copernicus.pdf`), to the agents.
   
5. **Display generated image**:
   - The image generated by the second agent is retrieved using `result.Message.Images` and displayed using `ImagePreviewer.ShowImage()`.

## üîß Features
- **PDF analysis**: The first agent is capable of analyzing the contents of a PDF to generate a relevant image description.
- **Image generation**: The second agent creates an image based on the prompt generated by the first agent.
- **Agent redirection**: The workflow between agents allows for dynamic redirection and task delegation.
- **Concise image prompts**: The first agent generates a short and concise prompt for image generation based on the content of the PDF.
